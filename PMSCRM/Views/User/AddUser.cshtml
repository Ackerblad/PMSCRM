@model PMSCRM.Utilities.UserRegistration

@{
    ViewData["Title"] = ViewBag.IsEditMode ? "Edit User" : "Add User";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="~/css/buttons.css">

<div class="card shadow-sm p-4 mb-4">
    @if (!string.IsNullOrEmpty(ViewBag.Message))
    {
        <div class="alert @(ViewBag.MessageType == "success" ? "alert-success" : "alert-danger")" role="alert">
            @ViewBag.Message
        </div>
    }

    <form class="was-validated" asp-controller="User" asp-action="@(ViewBag.IsEditMode ? "EditUser" : "AddUser")" method="post">

        <div class="mb-3">
            <label for="roleId" class="form-label">Role</label>
            <select class="form-select" asp-for="RoleId" required>
                <option value="">Select a role...</option>
                @if (ViewBag.Roles != null)
                {
                    foreach (var role in ViewBag.Roles as List<SelectListItem>)
                    {
                        <option value="@role.Value">@role.Text</option>
                    }
                }
                else
                {
                    <option value="">No roles available</option>
                }
            </select>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please select a role.</div>
        </div>

        <div class="mb-3">
            <label for="Name" class="form-label">Email</label>
            <input type="text" class="form-control" id="emailAddress" placeholder="Enter user's email address" name="EmailAddress" value="@Model?.EmailAddress" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="mb-3">
            <label for="Name" class="form-label">First Name</label>
            <input type="text" class="form-control" id="firstName" placeholder="Enter user's first name" name="FirstName" value="@Model?.FirstName" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="mb-3">
            <label for="Name" class="form-label">Last Name</label>
            <input type="text" class="form-control" id="lastName" placeholder="Enter user's last name" name="LastName" value="@Model?.LastName" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="mb-3">
            <label for="Name" class="form-label">Phone Number</label>
            <input type="text" class="form-control" id="phoneNumber" placeholder="Enter user's phone number" name="PhoneNumber" value="@Model?.PhoneNumber" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>

        <button type="submit" class="btn btn-submit">@(ViewBag.IsEditMode ? "Save Changes" : "Submit")</button>
        <a href="/User/ViewUsers" class="btn btn-cancel">Cancel</a>
    </form>
</div>

